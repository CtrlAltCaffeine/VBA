function downloadFileFromUrl(url) {
  try {
    var options = {
      followRedirects: true,
      headers: {
        "User-Agent": "Mozilla/5.0 (compatible; Googlebot/2.1; +http://www.google.com/bot.html)"
      }
    };

    var response = UrlFetchApp.fetch(url, options);

    if (response.getResponseCode() === 200) {
      var fileBlob = response.getBlob();
      var contentType = response.getHeaders()["Content-Type"];

      var extension = getExtensionFromContentType(contentType);

      // If the content type is not recognized or the extension is empty, use a default extension
      if (!extension) {
        extension = "dat";
      }

      var fileName = "downloaded_file." + extension;

      var folder = DriveApp.getRootFolder();
      folder.createFile(fileBlob.setName(fileName));
    } else {
      Logger.log("Failed to download file from URL: " + url + " - Response code: " + response.getResponseCode());
    }
  } catch (error) {
    Logger.log("Error while downloading file from URL: " + url + " - " + error.toString());
  }
}

function getExtensionFromContentType(contentType) {
  var contentTypeMappings = {
    "application/pdf": "pdf",
    "image/jpeg": "jpg",
    "image/png": "png",
    // Add more content type mappings here as needed
  };

  return contentTypeMappings[contentType] || "";
}

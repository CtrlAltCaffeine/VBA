import xml.etree.ElementTree as ET
import pandas as pd

root = ET.fromstring(raw_xml)
data_for_df = []

for portfolio in root.findall('portfolio'):
    cycle_date_element = portfolio.find('cycleDate')
    cycle_date = cycle_date_element.text if cycle_date_element is not None else None
    entities_element = portfolio.find('entities')
    clr_mbr_firm_id = entities_element.get('clrMbrFirmId') if entities_element is not None else None
    pb_acct_id = entities_element.get('pbAcctId') if entities_element is not None else None
    for transaction in portfolio.findall('transaction'):
        payload_element = transaction.find('payload')
        payload_content = payload_element.text if payload_element is not None else None
        data_for_df.append({
            'cycleDate': cycle_date,
            'clrMbrFirmId': clr_mbr_firm_id,
            'pbAcctId': pb_acct_id,
            'transaction_payload': payload_content
        })

df = pd.DataFrame(data_for_df)
print(df)
